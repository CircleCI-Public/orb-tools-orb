version: 2.1
setup: true
orbs:
  cli: circleci/circleci-cli@0.1
  orb-tools-alpha: circleci/orb-tools@dev:alpha
  shellcheck: circleci/shellcheck@2.2

parameters:
  dev-orb-version:
    type: string
    default: "dev:alpha"

workflows:
  test-pack:
    jobs:
      - orb-tools-alpha/lint
      - orb-tools-alpha/pack
      - orb-tools-alpha/review
      - shellcheck/check:
          exclude: SC2148,SC2038,SC2086,SC2002,SC2016
      - orb-tools-alpha/publish-dev:
          orb-name: circleci/orb-tools
          requires: [orb-tools-alpha/lint, orb-tools-alpha/review, orb-tools-alpha/pack, shellcheck/check]
          context: orb-publishers
      - orb-tools-alpha/continue:
          requires: [orb-tools-alpha/publish-dev]
