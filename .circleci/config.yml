version: 2.1
setup: true
orbs:
  cli: circleci/circleci-cli@0.1
  orb-tools: circleci/orb-tools@10
  orb-tools-alpha: circleci/orb-tools@<<pipeline.parameters.dev-orb-version>>
  shellcheck: circleci/shellcheck@2.2

parameters:
  dev-orb-version:
    type: string
    default: "dev:alpha"

workflows:
  test-pack:
    jobs:
      - orb-tools-alpha/lint
      - orb-tools-alpha/pack
      - orb-tools-alpha/review
      - orb-tools-alpha/publish-dev:
          requires: [orb-tools-alpha/lint, orb-tools-alpha/review, orb-tools-alpha/pack]
      - orb-tools-alpha/continue:
          requires: [orb-tools-alpha/publish-dev]
